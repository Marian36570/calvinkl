<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Набір трусів Calvin Klein</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: url('https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1350&q=80') no-repeat center center fixed;
      background-size: cover;
      color: #fff;
      margin: 0;
      padding: 20px;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    /* Напівпрозорий фон для контенту */
    .container {
      max-width: 480px;
      margin: 0 auto 40px;
      background: rgba(0,0,0,0.65);
      padding: 25px 30px;
      border-radius: 15px;
      box-shadow: 0 0 25px rgba(233, 30, 99, 0.6);
      text-align: center;
      color: #fff;
    }
    h1 {
      color: #ff4081;
      margin-bottom: 15px;
      text-shadow: 0 0 8px #ff4081;
    }
    .price {
      font-size: 24px;
      margin-bottom: 20px;
    }
    .price del {
      color: #aaa;
      margin-right: 10px;
      text-decoration: line-through;
    }
    .price strong {
      color: #ff4081;
      text-shadow: 0 0 6px #ff4081;
    }
    .main-image {
      max-width: 100%;
      height: auto;
      border-radius: 15px;
      border: 3px solid #ff4081;
      margin-bottom: 20px;
      cursor: pointer;
      transition: transform 0.3s ease;
    }
    .main-image:hover {
      transform: scale(1.05);
    }
    form {
      display: flex;
      flex-direction: column;
      gap: 15px;
      text-align: left;
    }
    label {
      font-weight: 600;
      color: #ff4081;
      text-shadow: 0 0 5px #ff4081;
    }
    input, select {
      padding: 12px 15px;
      font-size: 16px;
      border-radius: 10px;
      border: 1.5px solid #ff4081;
      outline: none;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
      width: 100%;
      box-sizing: border-box;
      background: rgba(255 255 255 / 0.1);
      color: #fff;
      text-shadow: 0 0 2px #000;
    }
    input::placeholder {
      color: #ff80abaa;
    }
    input:focus, select:focus {
      border-color: #ff80ab;
      box-shadow: 0 0 8px #ff80ab;
      background: rgba(255 255 255 / 0.15);
    }
    button {
      background: #ff4081;
      color: white;
      font-weight: 700;
      font-size: 18px;
      border: none;
      border-radius: 10px;
      padding: 14px 0;
      cursor: pointer;
      transition: background 0.3s ease, box-shadow 0.3s ease;
      margin-top: 10px;
      text-shadow: 0 0 5px #fff;
      box-shadow: 0 0 10px #ff4081;
    }
    button:hover {
      background: #e040fb;
      box-shadow: 0 0 15px #e040fb;
    }
    .footer {
      text-align: center;
      margin-top: 12px;
      font-size: 14px;
      color: #ddd;
      text-shadow: 0 0 4px #000;
    }
    .size-table {
      border-collapse: collapse;
      width: 100%;
      margin-bottom: 15px;
      color: #fff;
      text-shadow: 0 0 4px #000;
    }
    .size-table th, .size-table td {
      border: 1px solid #ff4081;
      padding: 8px;
      text-align: center;
    }
    .size-table th {
      background-color: rgba(255 64 129 / 0.3);
      color: #ff4081;
      text-shadow: none;
    }
    /* Вибір трусів */
    .variants {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-bottom: 20px;
    }
    .variant-img {
      width: 90px;
      height: 90px;
      border: 3px solid transparent;
      border-radius: 15px;
      cursor: pointer;
      transition: border-color 0.3s ease, transform 0.3s ease;
      object-fit: contain;
      background: #fff;
    }
    .variant-img.selected {
      border-color: #ff4081;
      transform: scale(1.1);
      box-shadow: 0 0 10px #ff4081;
    }

    /* Відгуки */
    .reviews-container {
      max-width: 480px;
      margin: 0 auto 40px;
      background: rgba(0,0,0,0.65);
      border-radius: 15px;
      padding: 20px 25px;
      color: #fff;
      box-shadow: 0 0 25px rgba(233, 30, 99, 0.6);
    }
    .reviews-container h2 {
      color: #ff4081;
      text-align: center;
      margin-bottom: 15px;
      text-shadow: 0 0 8px #ff4081;
    }
    .review {
      background: rgba(255 255 255 / 0.1);
      border-radius: 10px;
      padding: 15px 20px;
      margin-bottom: 15px;
      box-shadow: inset 0 0 6px #ff4081;
      font-style: italic;
      font-size: 14px;
      position: relative;
    }
    .review::before {
      content: "“";
      font-size: 40px;
      position: absolute;
      left: 15px;
      top: 10px;
      color: #ff80ab;
      font-weight: 900;
      font-family: serif;
    }
    .review::after {
      content: "”";
      font-size: 40px;
      position: absolute;
      right: 15px;
      bottom: 10px;
      color: #ff80ab;
      font-weight: 900;
      font-family: serif;
    }
    .review-author {
      margin-top: 8px;
      font-weight: 700;
      font-size: 13px;
      color: #ff80ab;
      text-align: right;
    }

    /* Мобільна адаптація */
    @media (max-width: 500px) {
      .variants {
        gap: 10px;
      }
      .variant-img {
        width: 70px;
        height: 70px;
      }
      .container, .reviews-container {
        padding: 20px;
        margin: 0 10px 30px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Набір трусів Calvin Klein</h1>

    <div class="variants">
      <img src="calvin1.jpg" alt="Варіант 1" class="variant-img selected" data-img="calvin1.jpg" data-name="Варіант 1" />
      <img src="calvin2.jpg" alt="Варіант 2" class="variant-img" data-img="calvin2.jpg" data-name="Варіант 2" />
      <img src="calvin3.jpg" alt="Варіант 3" class="variant-img" data-img="calvin3.jpg" data-name="Варіант 3" />
    </div>

    <img src="calvin1.jpg" alt="Фото набору трусів" class="main-image" id="mainImage" />

    <div class="price">
      <del>1999 грн</del> <strong>1400 грн</strong> — акція!
    </div>

    <table class="size-table">
      <thead>
        <tr><th>Розмір</th><th>Обхват талії (см)</th></tr>
      </thead>
      <tbody>
        <tr><td>S</td><td>70-76</td></tr>
        <tr><td>M</td><td>76-82</td></tr>
        <tr><td>L</td><td>82-88</td></tr>
        <tr><td>XL</td><td>88-94</td></tr>
        <tr><td>XXL</td><td>94-100</td></tr>
      </tbody>
    </table>

    <form id="order-form" autocomplete="off">
      <label for="size">Обрати розмір:</label>
      <select name="size" id="size" required>
        <option value="">Оберіть розмір</option>
        <option value="S">S</option>
        <option value="M">M</option>
        <option value="L">L</option>
        <option value="XL">XL</option>
        <option value="XXL">XXL</option>
      </select>

      <input type="text" name="firstName" placeholder="Ім'я" required />
      <input type="text" name="lastName" placeholder="Прізвище" required />
      <input type="tel" name="phone" placeholder="Номер телефону" required pattern="[0-9+\- ]{7,15}" title="Введіть коректний номер телефону" />

      <input list="city-list" id="cityInput" name="city" placeholder="Введіть або оберіть місто" required autocomplete="off" />
      <datalist id="city-list"></datalist>

      <select id="warehouseSelect" name="branch" required>
        <option value="">Оберіть відділення</option>
      </select>

      <button type="submit">Замовити</button>
    </form>

    <div class="footer">
      Всі замовлення відправляються через Нову Пошту, доставка без передоплати.
    </div>
  </div>

  <div class="reviews-container">
    <h2>Відгуки наших клієнтів</h2>
    <div class="review">
      Дуже комфортні труси, ношу вже другий місяць — зовсім не натирають і не розтягуються.
      <div class="review-author">— Олександр</div>
    </div>
    <div class="review">
      Якість на висоті, доставка була дуже швидкою. Рекомендую цей набір усім!
      <div class="review-author">— Марія</div>
    </div>
    <div class="review">
      Дуже сподобалась кольорова гама і матеріал. Взяла ще собі й чоловікові.
      <div class="review-author">— Тетяна</div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
  <script>
    // EmailJS ініціалізація
    emailjs.init("Dx57A1q8VUKvdmwN9");

    // Вибір варіанту трусів
    const variants = document.querySelectorAll('.variant-img');
    const mainImage = document.getElementById('mainImage');
    let selectedVariantName = variants[0].dataset.name;
    let selectedVariantImg = variants[0].dataset.img;

    variants.forEach(variant => {
      variant.addEventListener('click', () => {
        // Зняти вибір з інших
        variants.forEach(v => v.classList.remove('selected'));
        // Вибрати поточний
        variant.classList.add('selected');
        // Змінити основне фото
        mainImage.src = variant.dataset.img;
        selectedVariantName = variant.dataset.name;
        selectedVariantImg = variant.dataset.img;
      });
    });

    // Завантаження міст і відділень Нової Пошти
    const apiKey = 'a249c591d0c7fff13d5bc43044b49d5e';
    const NP_API_URL = 'https://api.novaposhta.ua/v2.0/json/';

    let cities = [];

    async function loadCities() {
      try {
        const response = await fetch(NP_API_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            apiKey: apiKey,
            modelName: "Address",
            calledMethod: "getCities",
            methodProperties: {}
          })
        });
        const data = await response.json();
        if (data.success) {
          const datalist = document.getElementById('city-list');
          cities = data.data;
          datalist.innerHTML = '';
          data.data.forEach(city => {
            const option = document.createElement('option');
            option.value = city.Description;
            option.dataset.ref = city.Ref;
            datalist.appendChild(option);
          });
        }
      } catch (err) {
        console.error('Помилка при завантаженні міст:', err);
      }
    }

    async function loadWarehouses(cityRef) {
      try {
        const response = await fetch(NP_API_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            apiKey: apiKey,
            modelName: "Address",
            calledMethod: "getWarehouses",
            methodProperties: { CityRef: cityRef }
          })
        });
        const data = await response.json();
        const warehouseSelect = document.getElementById('warehouseSelect');
        warehouseSelect.innerHTML = '<option value="">Оберіть відділення</option>';
        if (data.success) {
          data.data.forEach(wh => {
            const option = document.createElement('option');
            option.value = wh.Description;
            option.textContent = wh.Description;
            warehouseSelect.appendChild(option);
          });
        }
      } catch (err) {
        console.error('Помилка при завантаженні відділень:', err);
      }
    }

    document.getElementById('cityInput').addEventListener('input', (e) => {
     
